#!/usr/bin/env php
<?php
/**
 * SiteCLI - Help you manage Nginx local development configuration
 *
 * @author  panlatent@gmail.com
 * @link    https://github.com/panlatent/site-cli
 * @license https://opensource.org/licenses/MIT
 */

use Panlatent\SiteCli\Commands\CompletionCommand;
use Panlatent\SiteCli\Commands\ConfigCommand;
use Panlatent\SiteCli\Commands\DefaultCommand;
use Panlatent\SiteCli\Commands\DisableCommand;
use Panlatent\SiteCli\Commands\EnableCommand;
use Panlatent\SiteCli\Commands\ListCommand;
use Symfony\Component\Console\Application;

if (version_compare(PHP_VERSION, '5.5', '<')) {
    die("Site CLI need php version not lower than 5.5\n");
}

if (file_exists(__DIR__ . '/../vendor/autoload.php')) {
    require(__DIR__ . '/../vendor/autoload.php');
} elseif (file_exists(__DIR__ . '/../autoload.php')) {
    require(__DIR__ . '/../autoload.php');
} elseif (file_exists(__DIR__ . '/../../../autoload.php')) {
    require(__DIR__ . '/../../../autoload.php');
} else {
    die('Not found autoload.php');
}

$app = new Application('site-cli', '1.1.0');
$default = new DefaultCommand();

$app->add($default);
$app->add(new CompletionCommand());
$app->add(new ConfigCommand());
$app->add(new ListCommand());
$app->add(new EnableCommand());
$app->add(new DisableCommand());

$app->setDefaultCommand($default->getName());
$app->run();
